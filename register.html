<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--

Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Title      : Harvest
Version    : 1.0
Released   : 20081106
Description: A two-column, fixed-width and lightweight template ideal for 1024x768 resolutions. Suitable for blogs and small websites.

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.110-1983"></meta>
	<meta http-equiv="Content-Language" content="en"></meta>	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Weight Loss Challenge</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link href="default.css" rel="stylesheet" type="text/css" />
	<script src="jquery-1.9.1.min.js"></script>
	<script src="jquery.validate.min.js"></script>
	<script src="jquery.form.js"></script>
	<script src="jquery.cookie.js"></script>

	<script type="text/javascript" src="final.js"></script>
	<script>
		<!-- $(document).ready(checkLogin); -->
		$(document).ready(checkLogin);
		$(document).ready(checkMessages);
		$(document).ready(checkRegister);
	</script>
</head>
<body>

<div id="logo-wrap">
<div id="logo">
	<h1><a href="index.html">Lending Library Main Page</a></h1>
</div>
</div>

<!-- start header -->
<div id="header">
	<div id="menu">
		<ul>
			<li class="current_page_item"><a href="index.html">Homepage</a></li>
			<li><a href="myresults.html">My results</a></li>
			<li><a href="challenge.html">Weight Loss Challenge</a></li>
			<li class="last"><a href="register.html">Sign up</a></li>
		</ul>
	</div>
</div>
<!-- end header -->
<!-- start page -->
<div id="wrapper">
<div id="wrapper-btm">
<div id="page">
	<!-- start content -->
	<div id="content">
		<div id="banner">&nbsp;</div>
		<div id="usermsg"></div>
		<div class="post">
			<h1 class="title">Registration</h1>
			<div class="entry" id="regmsg">
				
			</div>
		</div>
		<div class="post">
			<div class="entry">
				<div id="registerbox">
					<form id="registerform" method="post" action="register.php" enctype="multipart/form-date">
						<SCRIPT TYPE="text/javascript">
						<!-- From jQuery documentation on $.ajax, $.post -->
						$("#registerform").submit(function(event) {
							event.preventDefault();
							
							//Acquire data from form
							var $form = $( this ),
								term = $form.find( 'input[name="username"]' ).val(),
								url = "https://web.engr.oregonstate.edu/~wongbe/CS419/login/caslogin.php";
								
							//Send username for validation
							var posting = $.ajax({
											url, 
											data: { username: term },
											success: function( data ) {
														var content = $( data ).find( '#registerform' );
														$( 'input[name="s"]' ).empty().append( content );
													},
											//Error handling per http://encosia.com/use-jquery-to-catch-and-display-aspnet-ajax-service-errors/
											error: function(jqxhr, status, error) {
														var err = eval("(" + xhr.responseText + ")");
														alert(err.Message);
												});
							}
						});
						</SCRIPT>
						<fieldset>
						<!-- Fields will be generated by jquery if user is not logged in -->
						</fieldset>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- end content -->
	<!-- start sidebar -->
	<div id="sidebar">
		<ul>
			<li id="search">
				<h2>members</h2>
					<div id="welcome">
					</div>
						<div id="loginbox">
							<form id="loginform" method="GET" action="https://login.oregonstate.edu/cas/login" enctype="multipart/form-date">
								<fieldset>
								<!-- Fields will be generated by jquery if user is not logged in -->
								</fieldset>
							</form>
						</div>
			</li>
		</ul>
	</div>
	<!-- end sidebar -->
	<div style="clear: both;">&nbsp;</div>
</div>
<!-- end page -->
</div>
</div>
<!-- start footer -->
<div id="footer">
	<div id="footer-wrap">
	<p id="legal">(c) 2007 YourSite. Design by <a href="http://www.freecsstemplates.org/">Free CSS Templates</a>.</p>
	</div>
</div>
<!-- end footer -->
</body>
</html>
